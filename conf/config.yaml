defaults:
  - model: probing_pair
  - datamodule: probing
  #  - datamodule/preprocessor: ${model/subject_model}
  - loop: default_loop

gpus: 1
num_workers: 4
random_seed: 1590258941
continue_from_checkpoint: null

training:
  epochs: 30
  batch_size: 32
  gradient_clip_val: 5.0
  accumulate_batches: 1
  # checkpointing
  save_ckpts: 1
  monitor: val/loss
  mode: min
  patience: 5

testing:
  log_dir: 'outputs/'
  test_best_k: 5
  batch_size: 32

metrics:
  - _target_: torchmetrics.F1
    average: 'micro'

logger:
  _target_: logger.loggers.WandbMinMaxLogger
log_gradients: False

hydra:
  run:
    dir: outputs/single/${datamodule.dataset.name}/${now:%Y-%m-%d}/${now:%H-%M-%S}

  sweep:
    dir: outputs/sweep/${datamodule.dataset.name}/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: 'layer=${model.pooler.layer_to_probe}'
    # ${hydra.job.num}

tags:
  - 'layer:${model.pooler.layer_to_probe}'
  - ${datamodule.dataset.name}